# TCP

## 连接和断开

TCP的连接和断开分别需要经过**三次握手**和**四次挥手**。

### 三次握手

客户端通过 IP地址 和 服务端建立TCP 连接（若是域名会先进行NDS解析）。最开始的 三个数据包 对应 TCP的**三次握手** 。

* **第一次握手（SYN）**：客户端发送 SYN(seq=0) 到服务端。客户端进入 SYN_SEND状态。
* **第二次握手（SYN/ACK）**：服务端接收客户端的 SYN(seq=0)后，对seq进行校验，然后发出应答 ACK 和SYN ，即 SYN(seq=0)+ACK(ack=1)。服务端进入 SYN_RECV 状态。
* **第三次握手（ACK）**：客户端接收到服务端的 SYN(seq=0)+ACK(ack=1) 后，对seq进行校验, 并发出应答 ACK(ack=seq+1)。

![image-20230124171405330](./TCP.assets/image-20230124171405330.png)



### 四次挥手